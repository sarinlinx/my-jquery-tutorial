<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" type="text/css" href="../../_css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="../../_css/style.css">
    <title>Ajax</title>

    <style>
        table {
            margin: 5%;
            font-family: Arial;
            font-size: 1.25em;
        }

        table,
        th,
        td {
            border: 1px solid purple;
            border-collapse: collapse;
        }

        th,
        td {
            padding: .25em;
        }

        th {
            background-color: purple;
            color: white;
        }

        .txtbox_itm {
            font-size: 18pt;
            height: 20px;
            width: 300px;
        }

        .txtbox {
            font-size: 18pt;
            height: 20px;
            width: 50px;
        }

        #amount_1 {
            display: none;
        }

        button {
            width: 100px;
            height: 50px;
        }
    </style>
</head>

<body>
    <section class="container">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb breadcrumb-container">
                <li class="breadcrumb-item"><a class="breadcrumb-link" href="../../index.html">Home</a></li>
                <li class="breadcrumb-item active" aria-current="page">Ajax</li>
            </ol>
        </nav>


        <h1>Ajax</h1>
        <p>Old aticle that doesn't use Ajax</p>
        <ul>
            <li><a href="http://norvig.com/21-days.html">norvig.com/21-days</a></li>
        </ul>

        <h1>Ajax</h1>
        <p>Ajax can return 3 types of data</p>
        <ul>
            <li>xml</li>
            <li>html</li>
            <li>json</li>
        </ul>










        <h1>Implementing Ajax using the load() method</h1>
        <p>Put the data at https://raw.githubusercontent.com/imtiazahmad007/resources/master/some_random_text.txt onto the web page</p>

        <pre class="example"><span class="code-html">&lt;div class="main"&gt;
&lt;/div&gt;
&lt;button id="btn_1"&gt; Load Messages &lt;/button&gt;</span>

<span class="code-js">$("button").on("click", function() {
  <span class="code-comment">//load method</span>
  var url = "https://raw.githubusercontent.com/imtiazahmad007/resources/master/some_random_text.txt";
  $("div.main").load(url);
});</span></pre>

        <h3>Example</h3>
        <!-- <p><img src="img/SQL Image.jpg" height="300" width="300"></p> -->
        <div class="main">
        </div>
        <button id="btn1"> Load Messages </button>



        <h1>Load a table using load()</h1>

        <pre class="example"><span class="code-html">&lt;div class="main"&gt;
        &lt;/div&gt;
        &lt;button id="btn_1"&gt; Load Messages &lt;/button&gt;</span>

        <span class="code-js">$("button").on("click", function() {
          <span class="code-comment">//load method</span>
          var table = "https://raw.githubusercontent.com/imtiazahmad007/resources/master/sample_table.html";
          $("div.main").load(table);
        });</span></pre>

        <h3>Example</h3>
        <!-- <p><img src="img/SQL Image.jpg" height="300" width="300"></p> -->
        <div class="main2">
        </div>
        <button id="btn2"> Load Messages </button>



        <h1>Load only part of the table</h1>
<p>Add CSS selectors after the HTML URL to specify which part of the table to load</p>

        <pre class="example"><span class="code-html">&lt;div class="main"&gt;
        &lt;/div&gt;
        &lt;button id="btn_1"&gt; Load Messages &lt;/button&gt;</span>

        <span class="code-js">$("button").on("click", function() {
          <span class="code-comment">//load method</span>
          var table = "https://raw.githubusercontent.com/imtiazahmad007/resources/master/sample_table.html table fieldset:first";
          $("div.main").load(table);
        });</span></pre>

        <h3>Example</h3>
        <!-- <p><img src="img/SQL Image.jpg" height="300" width="300"></p> -->
        <div class="main3">
        </div>
        <button id="btn3"> Load Messages </button>




<h1>Callback function</h1>
<p>Executed after current event has completed</p>
<p>Wait for an element to load before doing anything else</p>
<p>To tell JS to wait, use a callback function</p>

<pre class="example"><span class="code-html">&lt;p id="img4"&gt;&lt;img src="../../_img/SQL-Image.jpg" height="300" width="300"&gt;&lt;/p&gt;

&lt;div class="main4"&gt;
&lt;/div&gt;

&lt;button id="btn4"&gt; Load Messages &lt;/button&gt;</span>

<span class="code-js">$("button#btn4").on("click", function() {
  <span class="code-comment">//load method</span>
  var table = "https://raw.githubusercontent.com/imtiazahmad007/resources/master/sample_table.html table fieldset:first";
  $("div.main4").load(table);

  <span class="code-comment">//add a callback function so everything after the image line waits 4 secs until it disappears</span>
  $("p#img4").hide(4000, function(){
    <span class="code-comment">//anything in here will load after the image is hidden</span>
    alert("the image has been hdiden");
  });
});</span></pre>

<h3>Example</h3>
<p id="img4"><img src="../../_img/SQL-Image.jpg" height="300" width="300"></p>
<div class="main4">
</div>
<button id="btn4"> Load Messages </button>






<h1>Using the ajax method</h1>

<p>Executed after current event has completed</p>
<p>Wait for an element to load before doing anything else</p>
<p>To tell JS to wait, use a callback function</p>

<pre class="example"><span class="code-html">&lt;div class="main5"&gt;
&lt;/div&gt;

&lt;button id="btn5"&gt; Load Messages &lt;/button&gt;</span>

<span class="code-js">$("button#btn5").on("click", function() {
    var url = "https://raw.githubusercontent.com/imtiazahmad007/resources/master/sample_table.html";
<span class="code-comment">//first var is the URL</span>
  $.ajax(url, {
    dataType: "html",<span class="code-comment">//next add the data type</span>
    method: 'GET',<span class="code-comment">//method</span>
    <span class="code-comment">//only if call is successful load response from the URL</span>
    success: function(response){
      $("div.main5").html(response);
    }<span class="code-comment">//no comma needed since it's last</span>
  })
});
</span></pre>

<h3>Example</h3>
<div class="main5">
</div>
<button id="btn5"> Load Messages </button>
















<h1>If there was an error during the Ajax call</h1>
<p>Since the URL is broken, an alert box displays notifying you that the ajax call failed.</p>


<pre class="example"><span class="code-html">&lt;div class="main6"&gt;
&lt;/div&gt;

&lt;button id="btn6"&gt; Load Messages &lt;/button&gt;</span>

<span class="code-js">$("button#btn6").on("click", function() {
  //load method
  var url = "https://raw.githubusercontent.com/imtiazahmad007/resources/master/sample_table_BROKEN.html";
  //first var is the URL

  $.ajax(url, {
    dataType: "html",
    method: 'GET',
    success: function(response){
      $("div.main6").html(response);
    },
    <span class="code-comment">//if there's an error
    //the param order matters, but you can name them anything</span>
    <span class="standout">error: function(request, errorType, errorMsg){
      alert("There was an issue with the Ajax call: " + errorMsg);
    }</span>
  });
});</span></pre>

<h3>Example</h3>
<div class="main6">
</div>
<button id="btn6"> Load Messages </button>










<h1>Retrieving JSON dummy data using a test website</h1>
<p>This website provide dummy data to test your code.</p>
<ul>
  <li><a href="https://jsonplaceholder.typicode.com" target="_blank">API site to test your code</a></li></ul>
<p>This prints the json data to the console.</p>
<pre class="example"><span class="code-js">$("button#btn7").on("click", function() {
  //load method
  var url = "https://jsonplaceholder.typicode.com/posts/1";
  //first var is the URL

  $.ajax(url, {
    dataType: "json",
    method: 'GET',
    success: function(response){
      // $("div.main7").json(response);
      console.log(response);
    },
    //if there's an error
    //the param order matters, but you can name them anything
    error: function(request, errorType, errorMsg){
      alert("There was an issue with the Ajax call: " + errorMsg);
    }
  });
});</span></pre>

<h3>Example</h3>
<div class="main7">
</div>
<button id="btn7"> Load Messages </button>










<h1>Load JSON dummy data into the webpage</h1><pre class="example"><span class="code-html">&lt;div class="main8"&gt;
&lt;/div&gt;

&lt;button id="btn8"&gt; Load Messages &lt;/button&gt;</span>

<span class="code-js">$("button#btn8").on("click", function() {
  //load method
  var url = "https://jsonplaceholder.typicode.com/posts/1";
  //first var is the URL

  $.ajax(url, {
    dataType: "json",
    method: 'GET',
    success: function(response){
      //get specific data
      var userId = response.userId;
      var title = response.title;
      //define html node
      var $info = $("&lt;p&gt;&lt;/p&gt;");
      //populate paragraph tags
      $info.text("user id is: " + userId + " title is: " + title);
      //print to web page
      $("div.main8").append($info);
    },
    //if there's an error
    //the param order matters, but you can name them anything
    error: function(request, errorType, errorMsg){
      alert("There was an issue with the Ajax call: " + errorMsg);
    }
  });
});</span></pre>

<h3>Example</h3>
<div class="main8">
</div>
<button id="btn8"> Load Messages </button>














<h1>Specify the param in the API url</h1>
<p>The full URL to get is https://jsonplaceholder.typicode.com/comments?postId=1</p>
<p>But the param at the end will be retrieved within the code.</p>




<pre class="example"><span class="code-html">lkjkljlj</span>

<span class="code-js">ljlkjlkjkjlk</span></pre>

<h3>Example</h3>
<div class="main9">
</div>
<button id="btn9"> Load Messages </button>














    </section>
    <script src="../../_js/jquery-3.4.1.min.js"></script>
    <script>
        $("button#btn1").on("click", function() {
            //load method
            var url = "https://raw.githubusercontent.com/imtiazahmad007/resources/master/some_random_text.txt";
            $("div.main").load(url);
        });

        $("button#btn2").on("click", function() {
            //load method
            var table = "https://raw.githubusercontent.com/imtiazahmad007/resources/master/sample_table.html";
            $("div.main2").load(table);
        });


        $("button#btn3").on("click", function() {
            //load method
            var table = "https://raw.githubusercontent.com/imtiazahmad007/resources/master/sample_table.html table fieldset:first";
            $("div.main3").load(table);
        });


        $("button#btn4").on("click", function() {
            //load method
            var table = "https://raw.githubusercontent.com/imtiazahmad007/resources/master/sample_table.html table fieldset:first";
            $("div.main4").load(table);

            //add a callback function so everything after the image line waits 4 secs until it disappears
            $("p#img4").hide(4000, function(){
              //anything in here will load after the image is hidden
              alert("the image has been hdiden");
            });
        });

        $("button#btn5").on("click", function() {
            //load method
            var url = "https://raw.githubusercontent.com/imtiazahmad007/resources/master/sample_table.html";
            //first var is the URL

            $.ajax(url, {
              dataType: "html",//next add the data type
              method: 'GET',//method
              //only if call is successful load response from the URL
              success: function(response){
                $("div.main5").html(response);
              }//no comma needed since it's last
            })
        });


        $("button#btn6").on("click", function() {
            //load method
            var url = "https://raw.githubusercontent.com/imtiazahmad007/resources/master/sample_table_BROKEN.html";
            //first var is the URL

            $.ajax(url, {
              dataType: "html",
              method: 'GET',
              success: function(response){
                $("div.main6").html(response);
              },
              //if there's an error
              //the param order matters, but you can name them anything
              error: function(request, errorType, errorMsg){
                alert("There was an issue with the Ajax call: " + errorMsg);
              }
            });
        });





        $("button#btn7").on("click", function() {
            //load method
            var url = "https://jsonplaceholder.typicode.com/posts/1";
            //first var is the URL

            $.ajax(url, {
              dataType: "json",
              method: 'GET',
              success: function(response){
                // $("div.main7").json(response);
                console.log(response);
              },
              //if there's an error
              //the param order matters, but you can name them anything
              error: function(request, errorType, errorMsg){
                alert("There was an issue with the Ajax call: " + errorMsg);
              }
            });
        });





                $("button#btn8").on("click", function() {
                    //load method
                    var url = "https://jsonplaceholder.typicode.com/posts/1";
                    //first var is the URL

                    $.ajax(url, {
                      dataType: "json",
                      method: 'GET',
                      success: function(response){
                        //get specific data
                        var userId = response.userId;
                        var title = response.title;
                        //define html node
                        var $info = $("<p></p>");
                        //populate paragraph tags
                        $info.text("user id is: " + userId + " title is: " + title);
                        //print to web page
                        $("div.main8").append($info);
                      },
                      //if there's an error
                      //the param order matters, but you can name them anything
                      error: function(request, errorType, errorMsg){
                        alert("There was an issue with the Ajax call: " + errorMsg);
                      }
                    });
                });







                $("button#btn9").on("click", function() {
                    //load method
                    var root = "https://jsonplaceholder.typicode.com/posts/1";
                    var root = "https://jsonplaceholder.typicode.com/comments";

                    $.ajax(root, {
                      dataType: "json",
                      method: 'GET',
                      success: function(response){
                        //get specific data
                        var userId = response.userId;
                        var title = response.title;
                        //define html node
                        var $info = $("<p></p>");
                        //populate paragraph tags
                        $info.text("user id is: " + userId + " title is: " + title);
                        //print to web page
                        $("div.main9").append($info);
                        console.log(response);

                      },
                      error: function(request, errorType, errorMsg){
                        alert("There was an issue with the Ajax call: " + errorMsg);
                      },
                      //data function. This passes in the param to the URL
                      data: {"postId": 1}
                    });
                });

    </script>
</body>

</html>
